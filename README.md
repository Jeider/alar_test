Установка

1. Установить Python, сделать виртуальное окружение.

2. Установить зависимости: в корневой папке нужно выполнить `pip install -r requirements.txt`

3. Установить Redis (достаточно дефолтных настроек)

4. Установить postgresql, создать БД с помощью скрипта init_db.sql

5. В корне папки nav_api выполнить команду `flask db upgrade`


Запуск инстансов

Чтобы запустить инстансы, нужно из каждой папки запустить сервер, а именно: auth_api, nav_api, route_generator

В каждой папке нужно выполнить `python app.py` с запущенным venv


Установка стартовых данных

1. Залогиниться как admin с помощью auth api:

`curl -X POST  127.0.0.1:5000/login-admin/1` 

2. Получить jwt-токен

3. С полученым токеном выполнить импорт

curl --header "x-access-tokens: ВПИСАТЬ_ВАШ_ТОКЕН"  127.0.0.1:5001/import


Логин обычным пользователем

1. Использовать обычный энтри-поинт

`curl -X POST  127.0.0.1:5000/login/2` 

2. По аналогии с админом прописывать токен ко всем запросам



Доступные энтри-поинты и как все это работает

1. GET `/points` - список доступных точек

2. POST `/routes/generate/from/10/to/25` - запрос на генерацию маршрута по начальной и конечной точке, возвращает uuid4, по которому можно чекать статус обработки

3. GET `/route-requests/uuid4/status` - по вписанному uuid4 можно узнать статус обработки, а если он будет обработан, то увидеть полное инфо

4. GET `/routes` - список доступных маршрутов

5. GET `/routes/1` - получить информацию по маршруту по его id

6. GET `/routes/stats` - получить число навигационных точек у каждого пользователя
